# 项目上下文

## 目标系统

参照 https://lhshop.online/module/unionshop/home/index（隆亨精品商城）

**核心特点：**
- 点数兑换商城（非金额支付）
- 商品分类：名錶、精品包、香水/保養品、3C/家電
- 功能：首页推荐、商品列表、商品详情、购物车、订单、会员中心

## 技术决策

| 项目 | 决策 | 原因 |
|------|------|------|
| 架构 | 单体 | 简化部署，满足需求 |
| JDK | 17 | 使用 dev-v3 分支 |
| 前端 | Vue 2 + Element UI | 沿用原版，减少改动 |
| 用户系统 | 外部 API | 对接现有系统 |
| 支付系统 | 外部 API（点数）| 对接现有系统 |

## 模块结构

```
mall/
├── mall-admin    # 后台管理 API（保留，微调）
├── mall-portal   # 前台商城 API（大改造）
│   └── external/ # 【新增】外部接口适配层
├── mall-search   # Elasticsearch 搜索（保留）
├── mall-common   # 公共模块（保留）
├── mall-mbg      # MyBatis Generator（保留）
├── mall-security # 安全模块（改造：支持外部Token）
└── mall-demo     # 测试代码（可删除）
```

## 数据库改造要点

### 保留
- `pms_*` 商品相关表
- `oms_*` 订单相关表（改 amount → points）
- `cms_*` 内容相关表

### 删除/停用
- `ums_member*` 会员表（改用外部系统）
- 支付相关表

### 新增
- `ums_external_user` 外部用户映射
- `ums_points_log` 点数变动记录

## 前端页面清单

### 前台商城
1. 首页 - 爆款推荐、公告、分类入口
2. 商品列表 - 分类筛选、收藏、分页
3. 商品详情 - 规格、库存、评价、推荐
4. 购物车
5. 兑换确认（下单）
6. 订单列表
7. 订单详情
8. 个人中心 - 点数余额、收藏、地址

### 后台管理
- 商品管理（价格→点数）
- 订单管理（显示点数）
- 内容管理（公告/新闻）
- 外部接口配置

## 待确认事项

- [ ] 外部登录 API 规格
- [ ] 外部点数 API 规格
- [ ] 外部兑换 API 规格
- [ ] 部署环境要求
